{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import professions from\"../mockData/professions.json\";import qualities from\"../mockData/qualities.json\";import users from\"../mockData/users.json\";import httpService from\"../services/http.service\";var useMockData=function useMockData(){var statusConsts={idle:\"Not Started\",pending:\"In Process\",successed:\"Ready\",error:\"Error occured\"};var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(statusConsts.idle),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),count=_useState8[0],setCount=_useState8[1];var summuryCount=professions.length+qualities.length+users.length;var incrementCount=function incrementCount(){setCount(function(prevState){return prevState+1;});};var updateProgress=function updateProgress(){if(count!==0&&status===statusConsts.idle){setStatus(statusConsts.pending);}var newProgress=Math.floor(count/summuryCount*100);if(progress<newProgress){setProgress(function(){return newProgress;});}if(newProgress===100){setStatus(statusConsts.successed);}};useEffect(function(){updateProgress();},[count]);function initialize(){return _initialize.apply(this,arguments);}function _initialize(){_initialize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _iterator,_step,prof,_iterator2,_step2,user,_iterator3,_step3,qual;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_iterator=_createForOfIteratorHelper(professions);_context.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=11;break;}prof=_step.value;_context.next=8;return httpService.put(\"profession/\"+prof._id,prof);case 8:incrementCount();case 9:_context.next=4;break;case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);_iterator.e(_context.t0);case 16:_context.prev=16;_iterator.f();return _context.finish(16);case 19:_iterator2=_createForOfIteratorHelper(users);_context.prev=20;_iterator2.s();case 22:if((_step2=_iterator2.n()).done){_context.next=29;break;}user=_step2.value;_context.next=26;return httpService.put(\"user/\"+user._id,user);case 26:incrementCount();case 27:_context.next=22;break;case 29:_context.next=34;break;case 31:_context.prev=31;_context.t1=_context[\"catch\"](20);_iterator2.e(_context.t1);case 34:_context.prev=34;_iterator2.f();return _context.finish(34);case 37:_iterator3=_createForOfIteratorHelper(qualities);_context.prev=38;_iterator3.s();case 40:if((_step3=_iterator3.n()).done){_context.next=47;break;}qual=_step3.value;_context.next=44;return httpService.put(\"quality/\"+qual._id,qual);case 44:incrementCount();case 45:_context.next=40;break;case 47:_context.next=52;break;case 49:_context.prev=49;_context.t2=_context[\"catch\"](38);_iterator3.e(_context.t2);case 52:_context.prev=52;_iterator3.f();return _context.finish(52);case 55:_context.next=61;break;case 57:_context.prev=57;_context.t3=_context[\"catch\"](0);setError(_context.t3);setStatus(statusConsts.error);case 61:case\"end\":return _context.stop();}}},_callee,null,[[0,57],[2,13,16,19],[20,31,34,37],[38,49,52,55]]);}));return _initialize.apply(this,arguments);}return{error:error,initialize:initialize,progress:progress,status:status};};export default useMockData;","map":{"version":3,"names":["useEffect","useState","professions","qualities","users","httpService","useMockData","statusConsts","idle","pending","successed","error","setError","status","setStatus","progress","setProgress","count","setCount","summuryCount","length","incrementCount","prevState","updateProgress","newProgress","Math","floor","initialize","prof","put","_id","user","qual"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/utils/mockData.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport professions from \"../mockData/professions.json\";\nimport qualities from \"../mockData/qualities.json\";\nimport users from \"../mockData/users.json\";\nimport httpService from \"../services/http.service\";\n\nconst useMockData = () => {\n    const statusConsts = {\n        idle: \"Not Started\",\n        pending: \"In Process\",\n        successed: \"Ready\",\n        error: \"Error occured\"\n    };\n    const [error, setError] = useState(null);\n    const [status, setStatus] = useState(statusConsts.idle);\n    const [progress, setProgress] = useState(0);\n    const [count, setCount] = useState(0);\n    const summuryCount = professions.length + qualities.length + users.length;\n    const incrementCount = () => {\n        setCount((prevState) => prevState + 1);\n    };\n    const updateProgress = () => {\n        if (count !== 0 && status === statusConsts.idle) {\n            setStatus(statusConsts.pending);\n        }\n        const newProgress = Math.floor((count / summuryCount) * 100);\n        if (progress < newProgress) {\n            setProgress(() => newProgress);\n        }\n        if (newProgress === 100) {\n            setStatus(statusConsts.successed);\n        }\n    };\n\n    useEffect(() => {\n        updateProgress();\n    }, [count]);\n    async function initialize() {\n        try {\n            for (const prof of professions) {\n                await httpService.put(\"profession/\" + prof._id, prof);\n                incrementCount();\n            }\n            for (const user of users) {\n                await httpService.put(\"user/\" + user._id, user);\n                incrementCount();\n            }\n            for (const qual of qualities) {\n                await httpService.put(\"quality/\" + qual._id, qual);\n                incrementCount();\n            }\n        } catch (error) {\n            setError(error);\n            setStatus(statusConsts.error);\n        }\n    }\n\n    return { error, initialize, progress, status };\n};\n\nexport default useMockData;\n"],"mappings":"yuBAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAOC,YAAW,KAAM,8BAA8B,CACtD,MAAOC,UAAS,KAAM,4BAA4B,CAClD,MAAOC,MAAK,KAAM,wBAAwB,CAC1C,MAAOC,YAAW,KAAM,0BAA0B,CAElD,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACtB,GAAMC,aAAY,CAAG,CACjBC,IAAI,CAAE,aAAa,CACnBC,OAAO,CAAE,YAAY,CACrBC,SAAS,CAAE,OAAO,CAClBC,KAAK,CAAE,eACX,CAAC,CAAC,cACwBV,QAAQ,CAAC,IAAI,CAAC,wCAAjCU,KAAK,eAAEC,QAAQ,8BACMX,QAAQ,CAACM,YAAY,CAACC,IAAI,CAAC,yCAAhDK,MAAM,eAAEC,SAAS,8BACQb,QAAQ,CAAC,CAAC,CAAC,yCAApCc,QAAQ,eAAEC,WAAW,8BACFf,QAAQ,CAAC,CAAC,CAAC,yCAA9BgB,KAAK,eAAEC,QAAQ,eACtB,GAAMC,aAAY,CAAGjB,WAAW,CAACkB,MAAM,CAAGjB,SAAS,CAACiB,MAAM,CAAGhB,KAAK,CAACgB,MAAM,CACzE,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CACzBH,QAAQ,CAAC,SAACI,SAAS,QAAKA,UAAS,CAAG,CAAC,GAAC,CAC1C,CAAC,CACD,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CACzB,GAAIN,KAAK,GAAK,CAAC,EAAIJ,MAAM,GAAKN,YAAY,CAACC,IAAI,CAAE,CAC7CM,SAAS,CAACP,YAAY,CAACE,OAAO,CAAC,CACnC,CACA,GAAMe,YAAW,CAAGC,IAAI,CAACC,KAAK,CAAET,KAAK,CAAGE,YAAY,CAAI,GAAG,CAAC,CAC5D,GAAIJ,QAAQ,CAAGS,WAAW,CAAE,CACxBR,WAAW,CAAC,iBAAMQ,YAAW,GAAC,CAClC,CACA,GAAIA,WAAW,GAAK,GAAG,CAAE,CACrBV,SAAS,CAACP,YAAY,CAACG,SAAS,CAAC,CACrC,CACJ,CAAC,CAEDV,SAAS,CAAC,UAAM,CACZuB,cAAc,EAAE,CACpB,CAAC,CAAE,CAACN,KAAK,CAAC,CAAC,CAAC,QACGU,WAAU,wIAAzB,+PAE2BzB,WAAW,8FAAnB0B,IAAI,mCACLvB,YAAW,CAACwB,GAAG,CAAC,aAAa,CAAGD,IAAI,CAACE,GAAG,CAAEF,IAAI,CAAC,QACrDP,cAAc,EAAE,CAAC,+PAEFjB,KAAK,mGAAb2B,IAAI,qCACL1B,YAAW,CAACwB,GAAG,CAAC,OAAO,CAAGE,IAAI,CAACD,GAAG,CAAEC,IAAI,CAAC,SAC/CV,cAAc,EAAE,CAAC,oQAEFlB,SAAS,mGAAjB6B,IAAI,qCACL3B,YAAW,CAACwB,GAAG,CAAC,UAAU,CAAGG,IAAI,CAACF,GAAG,CAAEE,IAAI,CAAC,SAClDX,cAAc,EAAE,CAAC,+SAGrBT,QAAQ,aAAO,CACfE,SAAS,CAACP,YAAY,CAACI,KAAK,CAAC,CAAC,8GAErC,6CAED,MAAO,CAAEA,KAAK,CAALA,KAAK,CAAEgB,UAAU,CAAVA,UAAU,CAAEZ,QAAQ,CAARA,QAAQ,CAAEF,MAAM,CAANA,MAAO,CAAC,CAClD,CAAC,CAED,cAAeP,YAAW"},"metadata":{},"sourceType":"module"}