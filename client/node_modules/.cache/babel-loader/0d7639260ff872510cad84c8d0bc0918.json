{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from\"@reduxjs/toolkit\";import professionService from\"../services/profession.service\";import isOutdated from\"../utils/isOutdated\";var professionsSlice=createSlice({name:\"professions\",initialState:{entities:null,isLoading:true,error:null,lastFetch:null},reducers:{professionsRequested:function professionsRequested(state){state.isLoading=true;},professionsReceved:function professionsReceved(state,action){state.entities=action.payload;state.lastFetch=Date.now();state.isLoading=false;},professionsRequestFiled:function professionsRequestFiled(state,action){state.error=action.payload;state.isLoading=false;}}});var professionsReducer=professionsSlice.reducer,actions=professionsSlice.actions;var professionsRequested=actions.professionsRequested,professionsReceved=actions.professionsReceved,professionsRequestFiled=actions.professionsRequestFiled;export var loadProfessionsList=function loadProfessionsList(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var lastFetch,_yield$professionServ,content;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:lastFetch=getState().professions.lastFetch;if(!isOutdated(lastFetch)){_context.next=14;break;}dispatch(professionsRequested());_context.prev=3;_context.next=6;return professionService.get();case 6:_yield$professionServ=_context.sent;content=_yield$professionServ.content;dispatch(professionsReceved(content));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);dispatch(professionsRequestFiled(_context.t0.message));case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var getProfessions=function getProfessions(){return function(state){return state.professions.entities;};};export var getProfessionsLoadingStatus=function getProfessionsLoadingStatus(){return function(state){return state.professions.isLoading;};};export var getProfessionbyId=function getProfessionbyId(id){return function(state){if(state.professions.entities){return state.professions.entities.find(function(p){return p._id===id;});}};};export default professionsReducer;","map":{"version":3,"names":["createSlice","professionService","isOutdated","professionsSlice","name","initialState","entities","isLoading","error","lastFetch","reducers","professionsRequested","state","professionsReceved","action","payload","Date","now","professionsRequestFiled","professionsReducer","reducer","actions","loadProfessionsList","dispatch","getState","professions","get","content","message","getProfessions","getProfessionsLoadingStatus","getProfessionbyId","id","find","p","_id"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/store/professions.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport professionService from \"../services/profession.service\";\nimport isOutdated from \"../utils/isOutdated\";\n\nconst professionsSlice = createSlice({\n    name: \"professions\",\n    initialState: {\n        entities: null,\n        isLoading: true,\n        error: null,\n        lastFetch: null\n    },\n    reducers: {\n        professionsRequested: (state) => {\n            state.isLoading = true;\n        },\n        professionsReceved: (state, action) => {\n            state.entities = action.payload;\n            state.lastFetch = Date.now();\n            state.isLoading = false;\n        },\n        professionsRequestFiled: (state, action) => {\n            state.error = action.payload;\n            state.isLoading = false;\n        }\n    }\n});\n\nconst { reducer: professionsReducer, actions } = professionsSlice;\nconst { professionsRequested, professionsReceved, professionsRequestFiled } =\n    actions;\n\nexport const loadProfessionsList = () => async (dispatch, getState) => {\n    const { lastFetch } = getState().professions;\n    if (isOutdated(lastFetch)) {\n        dispatch(professionsRequested());\n        try {\n            const { content } = await professionService.get();\n            dispatch(professionsReceved(content));\n        } catch (error) {\n            dispatch(professionsRequestFiled(error.message));\n        }\n    }\n};\nexport const getProfessions = () => (state) => state.professions.entities;\nexport const getProfessionsLoadingStatus = () => (state) =>\n    state.professions.isLoading;\nexport const getProfessionbyId = (id) => (state) => {\n    if (state.professions.entities) {\n        return state.professions.entities.find((p) => p._id === id);\n    }\n};\nexport default professionsReducer;\n"],"mappings":"uWAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,kBAAiB,KAAM,gCAAgC,CAC9D,MAAOC,WAAU,KAAM,qBAAqB,CAE5C,GAAMC,iBAAgB,CAAGH,WAAW,CAAC,CACjCI,IAAI,CAAE,aAAa,CACnBC,YAAY,CAAE,CACVC,QAAQ,CAAE,IAAI,CACdC,SAAS,CAAE,IAAI,CACfC,KAAK,CAAE,IAAI,CACXC,SAAS,CAAE,IACf,CAAC,CACDC,QAAQ,CAAE,CACNC,oBAAoB,CAAE,8BAACC,KAAK,CAAK,CAC7BA,KAAK,CAACL,SAAS,CAAG,IAAI,CAC1B,CAAC,CACDM,kBAAkB,CAAE,4BAACD,KAAK,CAAEE,MAAM,CAAK,CACnCF,KAAK,CAACN,QAAQ,CAAGQ,MAAM,CAACC,OAAO,CAC/BH,KAAK,CAACH,SAAS,CAAGO,IAAI,CAACC,GAAG,EAAE,CAC5BL,KAAK,CAACL,SAAS,CAAG,KAAK,CAC3B,CAAC,CACDW,uBAAuB,CAAE,iCAACN,KAAK,CAAEE,MAAM,CAAK,CACxCF,KAAK,CAACJ,KAAK,CAAGM,MAAM,CAACC,OAAO,CAC5BH,KAAK,CAACL,SAAS,CAAG,KAAK,CAC3B,CACJ,CACJ,CAAC,CAAC,CAAC,GAEcY,mBAAkB,CAAchB,gBAAgB,CAAzDiB,OAAO,CAAsBC,OAAO,CAAKlB,gBAAgB,CAA5BkB,OAAO,IACpCV,qBAAoB,CACxBU,OAAO,CADHV,oBAAoB,CAAEE,kBAAkB,CAC5CQ,OAAO,CADmBR,kBAAkB,CAAEK,uBAAuB,CACrEG,OAAO,CADuCH,uBAAuB,CAGzE,MAAO,IAAMI,oBAAmB,CAAG,QAAtBA,oBAAmB,kGAAS,iBAAOC,QAAQ,CAAEC,QAAQ,8JACtDf,SAAS,CAAKe,QAAQ,EAAE,CAACC,WAAW,CAApChB,SAAS,KACbP,UAAU,CAACO,SAAS,CAAC,0BACrBc,QAAQ,CAACZ,oBAAoB,EAAE,CAAC,CAAC,sCAEHV,kBAAiB,CAACyB,GAAG,EAAE,4CAAzCC,OAAO,uBAAPA,OAAO,CACfJ,QAAQ,CAACV,kBAAkB,CAACc,OAAO,CAAC,CAAC,CAAC,iFAEtCJ,QAAQ,CAACL,uBAAuB,CAAC,YAAMU,OAAO,CAAC,CAAC,CAAC,qEAG5D,qEACD,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAc,SAAS,UAACjB,KAAK,QAAKA,MAAK,CAACa,WAAW,CAACnB,QAAQ,KACzE,MAAO,IAAMwB,4BAA2B,CAAG,QAA9BA,4BAA2B,SAAS,UAAClB,KAAK,QACnDA,MAAK,CAACa,WAAW,CAAClB,SAAS,KAC/B,MAAO,IAAMwB,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,EAAE,QAAK,UAACpB,KAAK,CAAK,CAChD,GAAIA,KAAK,CAACa,WAAW,CAACnB,QAAQ,CAAE,CAC5B,MAAOM,MAAK,CAACa,WAAW,CAACnB,QAAQ,CAAC2B,IAAI,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,GAAG,GAAKH,EAAE,GAAC,CAC/D,CACJ,CAAC,GACD,cAAeb,mBAAkB"},"metadata":{},"sourceType":"module"}