{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport professionService from \"../services/profession.service\";\nimport isOutdated from \"../utils/isOutdated\";\nconst initialState = {\n  entities: null,\n  isLoading: true,\n  error: null,\n  lastFetch: null\n};\nconst professionsSlice = createSlice({\n  name: \"professions\",\n  initialState,\n  reducers: {\n    professionsRequested: state => {\n      state.isLoading = true;\n    },\n    professionsReceved: (state, action) => {\n      state.entities = action.payload;\n      state.lastFetch = Date.now();\n      state.isLoading = false;\n    },\n    professionsRequestFiled: (state, action) => {\n      state.error = action.payload;\n      state.isLoading = false;\n    }\n  }\n});\nconst {\n  reducer: professionsReducer,\n  actions\n} = professionsSlice;\nconst {\n  professionsRequested,\n  professionsReceved,\n  professionsRequestFiled\n} = actions;\nexport const loadProfessionsList = () => async (dispatch, getState) => {\n  const {\n    lastFetch\n  } = getState().professions;\n  if (isOutdated(lastFetch)) {\n    dispatch(professionsRequested());\n    try {\n      const {\n        content\n      } = await professionService.get();\n      dispatch(professionsReceved(content));\n    } catch (error) {\n      dispatch(professionsRequestFiled(result));\n    }\n  }\n};\nexport const getProfessions = () => state => state.professions.entities;\nexport const getProfessionsLoadingStatus = () => state => state.professions.isLoading;\nexport const getProfessionbyId = id => state => {\n  if (state.professions.entities) {\n    return state.professions.entities.find(p => p._id === id);\n  }\n};\nexport default professionsReducer;","map":{"version":3,"names":["createSlice","professionService","isOutdated","initialState","entities","isLoading","error","lastFetch","professionsSlice","name","reducers","professionsRequested","state","professionsReceved","action","payload","Date","now","professionsRequestFiled","reducer","professionsReducer","actions","loadProfessionsList","dispatch","getState","professions","content","get","result","getProfessions","getProfessionsLoadingStatus","getProfessionbyId","id","find","p","_id"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/store/professions.ts"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport professionService from \"../services/profession.service\";\nimport { IProfession } from \"../types/types\";\nimport isOutdated from \"../utils/isOutdated\";\nimport { AppDispatch } from \"./createStore\";\n\ninterface ProfessionState {\n    entities: any;\n    isLoading: boolean;\n    error: any;\n    lastFetch: any;\n}\n\nconst initialState: ProfessionState = {\n    entities: null,\n    isLoading: true,\n    error: null,\n    lastFetch: null\n};\n\nconst professionsSlice = createSlice({\n    name: \"professions\",\n    initialState,\n    reducers: {\n        professionsRequested: (state) => {\n            state.isLoading = true;\n        },\n        professionsReceved: (state, action) => {\n            state.entities = action.payload;\n            state.lastFetch = Date.now();\n            state.isLoading = false;\n        },\n        professionsRequestFiled: (state, action) => {\n            state.error = action.payload;\n            state.isLoading = false;\n        }\n    }\n});\n\nconst { reducer: professionsReducer, actions } = professionsSlice;\nconst { professionsRequested, professionsReceved, professionsRequestFiled } =\n    actions;\n\nexport const loadProfessionsList =\n    () => async (dispatch: AppDispatch, getState: any) => {\n        const { lastFetch } = getState().professions;\n        if (isOutdated(lastFetch)) {\n            dispatch(professionsRequested());\n            try {\n                const { content } = await professionService.get();\n                dispatch(professionsReceved(content));\n            } catch (error) {\n                dispatch(professionsRequestFiled(result));\n            }\n        }\n    };\nexport const getProfessions = () => (state: any) => state.professions.entities;\nexport const getProfessionsLoadingStatus = () => (state: any) =>\n    state.professions.isLoading;\nexport const getProfessionbyId = (id: string) => (state: any) => {\n    if (state.professions.entities) {\n        return state.professions.entities.find(\n            (p: IProfession) => p._id === id\n        );\n    }\n};\nexport default professionsReducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,iBAAiB,MAAM,gCAAgC;AAE9D,OAAOC,UAAU,MAAM,qBAAqB;AAU5C,MAAMC,YAA6B,GAAG;EAClCC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE,IAAI;EACfC,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE;AACf,CAAC;AAED,MAAMC,gBAAgB,GAAGR,WAAW,CAAC;EACjCS,IAAI,EAAE,aAAa;EACnBN,YAAY;EACZO,QAAQ,EAAE;IACNC,oBAAoB,EAAGC,KAAK,IAAK;MAC7BA,KAAK,CAACP,SAAS,GAAG,IAAI;IAC1B,CAAC;IACDQ,kBAAkB,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MACnCF,KAAK,CAACR,QAAQ,GAAGU,MAAM,CAACC,OAAO;MAC/BH,KAAK,CAACL,SAAS,GAAGS,IAAI,CAACC,GAAG,EAAE;MAC5BL,KAAK,CAACP,SAAS,GAAG,KAAK;IAC3B,CAAC;IACDa,uBAAuB,EAAE,CAACN,KAAK,EAAEE,MAAM,KAAK;MACxCF,KAAK,CAACN,KAAK,GAAGQ,MAAM,CAACC,OAAO;MAC5BH,KAAK,CAACP,SAAS,GAAG,KAAK;IAC3B;EACJ;AACJ,CAAC,CAAC;AAEF,MAAM;EAAEc,OAAO,EAAEC,kBAAkB;EAAEC;AAAQ,CAAC,GAAGb,gBAAgB;AACjE,MAAM;EAAEG,oBAAoB;EAAEE,kBAAkB;EAAEK;AAAwB,CAAC,GACvEG,OAAO;AAEX,OAAO,MAAMC,mBAAmB,GAC5B,MAAM,OAAOC,QAAqB,EAAEC,QAAa,KAAK;EAClD,MAAM;IAAEjB;EAAU,CAAC,GAAGiB,QAAQ,EAAE,CAACC,WAAW;EAC5C,IAAIvB,UAAU,CAACK,SAAS,CAAC,EAAE;IACvBgB,QAAQ,CAACZ,oBAAoB,EAAE,CAAC;IAChC,IAAI;MACA,MAAM;QAAEe;MAAQ,CAAC,GAAG,MAAMzB,iBAAiB,CAAC0B,GAAG,EAAE;MACjDJ,QAAQ,CAACV,kBAAkB,CAACa,OAAO,CAAC,CAAC;IACzC,CAAC,CAAC,OAAOpB,KAAK,EAAE;MACZiB,QAAQ,CAACL,uBAAuB,CAACU,MAAM,CAAC,CAAC;IAC7C;EACJ;AACJ,CAAC;AACL,OAAO,MAAMC,cAAc,GAAG,MAAOjB,KAAU,IAAKA,KAAK,CAACa,WAAW,CAACrB,QAAQ;AAC9E,OAAO,MAAM0B,2BAA2B,GAAG,MAAOlB,KAAU,IACxDA,KAAK,CAACa,WAAW,CAACpB,SAAS;AAC/B,OAAO,MAAM0B,iBAAiB,GAAIC,EAAU,IAAMpB,KAAU,IAAK;EAC7D,IAAIA,KAAK,CAACa,WAAW,CAACrB,QAAQ,EAAE;IAC5B,OAAOQ,KAAK,CAACa,WAAW,CAACrB,QAAQ,CAAC6B,IAAI,CACjCC,CAAc,IAAKA,CAAC,CAACC,GAAG,KAAKH,EAAE,CACnC;EACL;AACJ,CAAC;AACD,eAAeZ,kBAAkB"},"metadata":{},"sourceType":"module"}