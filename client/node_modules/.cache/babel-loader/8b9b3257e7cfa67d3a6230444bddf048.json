{"ast":null,"code":"import _defineProperty from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{validator}from\"../../utils/validator\";import TextField from\"../common/form/textField\";import SelectField from\"../common/form/selectField\";import RadioField from\"../common/form/radio.Field\";import MultiSelectField from\"../common/form/multiSelectField\";import CheckBoxField from\"../common/form/checkBoxField\";import{useSelector,useDispatch}from\"react-redux\";import{getQualities}from\"../../store/qualities\";import{getProfessions}from\"../../store/professions\";import{signUp}from\"../../store/users\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterForm=function RegisterForm(){var dispatch=useDispatch();var _useState=useState({email:\"\",password:\"\",profession:\"\",sex:\"male\",name:\"\",qualities:[],licence:false}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var qualities=useSelector(getQualities());var qualitiesList=qualities.map(function(q){return{label:q.name,value:q._id};});var professions=useSelector(getProfessions());var professionsList=professions.map(function(p){return{label:p.name,value:p._id};});var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var handleChange=function handleChange(target){setData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},target.name,target.value));});};var validatorConfog={email:{isRequired:{message:\"Электронная почта обязательна для заполнения\"},isEmail:{message:\"Email введен некорректно\"}},name:{isRequired:{message:\"Имя обязательно для заполнения\"},min:{message:\"Имя должено состаять миниму из 3 символов\",value:3}},password:{isRequired:{message:\"Пароль обязательна для заполнения\"},isCapitalSymbol:{message:\"Пароль должен содержать хотя бы одну заглавную букву\"},isContainDigit:{message:\"Пароль должен содержать хотя бы одно число\"},min:{message:\"Пароль должен состаять миниму из 8 символов\",value:8}},profession:{isRequired:{message:\"Обязательно выберите вашу профессию\"}},licence:{isRequired:{message:\"Вы не можете использовать наш сервис без подтреврждения лицензионного соглашения\"}}};useEffect(function(){validate();},[data]);var validate=function validate(){var errors=validator(data,validatorConfog);setErrors(errors);return Object.keys(errors).length===0;};var isValid=Object.keys(errors).length===0;var handleSubmit=function handleSubmit(e){e.preventDefault();var isValid=validate();if(!isValid)return;var newData=_objectSpread(_objectSpread({},data),{},{qualities:data.qualities.map(function(q){return q.value;})});dispatch(signUp(newData));};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"\\u042D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430\",name:\"email\",value:data.email,onChange:handleChange,error:errors.email}),/*#__PURE__*/_jsx(TextField,{label:\"\\u0418\\u043C\\u044F\",name:\"name\",value:data.name,onChange:handleChange,error:errors.name}),/*#__PURE__*/_jsx(TextField,{label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",name:\"password\",value:data.password,onChange:handleChange,error:errors.password}),/*#__PURE__*/_jsx(SelectField,{label:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438 \\u0441\\u0432\\u043E\\u044E \\u043F\\u0440\\u043E\\u0444\\u0435\\u0441\\u0441\\u0438\\u044E\",defaultOption:\"Choose...\",name:\"profession\",options:professionsList,onChange:handleChange,value:data.profession,error:errors.profession}),/*#__PURE__*/_jsx(RadioField,{options:[{name:\"Male\",value:\"male\"},{name:\"Female\",value:\"female\"},{name:\"Other\",value:\"other\"}],value:data.sex,name:\"sex\",onChange:handleChange,label:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u043E\\u043B\"}),/*#__PURE__*/_jsx(MultiSelectField,{options:qualitiesList,onChange:handleChange,name:\"qualities\",label:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0438 \\u043A\\u0430\\u0447\\u0435\\u0441\\u0432\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(CheckBoxField,{value:data.licence,onChange:handleChange,name:\"licence\",error:errors.licence,children:[\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \",/*#__PURE__*/_jsx(\"a\",{children:\"\\u043B\\u0438\\u0446\\u0435\\u043D\\u0437\\u0438\\u043E\\u043D\\u043D\\u043E\\u0435 \\u0441\\u043E\\u0433\\u043B\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!isValid,className:\"btn btn-primary w-100 mx-auto\",children:\"Submit\"})]});};export default RegisterForm;","map":{"version":3,"names":["React","useEffect","useState","validator","TextField","SelectField","RadioField","MultiSelectField","CheckBoxField","useSelector","useDispatch","getQualities","getProfessions","signUp","RegisterForm","dispatch","email","password","profession","sex","name","qualities","licence","data","setData","qualitiesList","map","q","label","value","_id","professions","professionsList","p","errors","setErrors","handleChange","target","prevState","validatorConfog","isRequired","message","isEmail","min","isCapitalSymbol","isContainDigit","validate","Object","keys","length","isValid","handleSubmit","e","preventDefault","newData"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/components/ui/registerForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { validator } from \"../../utils/validator\";\nimport TextField from \"../common/form/textField\";\nimport SelectField from \"../common/form/selectField\";\nimport RadioField from \"../common/form/radio.Field\";\nimport MultiSelectField from \"../common/form/multiSelectField\";\nimport CheckBoxField from \"../common/form/checkBoxField\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getQualities } from \"../../store/qualities\";\nimport { getProfessions } from \"../../store/professions\";\nimport { signUp } from \"../../store/users\";\n\nconst RegisterForm = () => {\n    const dispatch = useDispatch();\n    const [data, setData] = useState({\n        email: \"\",\n        password: \"\",\n        profession: \"\",\n        sex: \"male\",\n        name: \"\",\n        qualities: [],\n        licence: false\n    });\n\n    const qualities = useSelector(getQualities());\n    const qualitiesList = qualities.map((q) => ({\n        label: q.name,\n        value: q._id\n    }));\n    const professions = useSelector(getProfessions());\n\n    const professionsList = professions.map((p) => ({\n        label: p.name,\n        value: p._id\n    }));\n    const [errors, setErrors] = useState({});\n\n    const handleChange = (target) => {\n        setData((prevState) => ({\n            ...prevState,\n            [target.name]: target.value\n        }));\n    };\n    const validatorConfog = {\n        email: {\n            isRequired: {\n                message: \"Электронная почта обязательна для заполнения\"\n            },\n            isEmail: {\n                message: \"Email введен некорректно\"\n            }\n        },\n        name: {\n            isRequired: {\n                message: \"Имя обязательно для заполнения\"\n            },\n            min: {\n                message: \"Имя должено состаять миниму из 3 символов\",\n                value: 3\n            }\n        },\n        password: {\n            isRequired: {\n                message: \"Пароль обязательна для заполнения\"\n            },\n            isCapitalSymbol: {\n                message: \"Пароль должен содержать хотя бы одну заглавную букву\"\n            },\n            isContainDigit: {\n                message: \"Пароль должен содержать хотя бы одно число\"\n            },\n            min: {\n                message: \"Пароль должен состаять миниму из 8 символов\",\n                value: 8\n            }\n        },\n        profession: {\n            isRequired: {\n                message: \"Обязательно выберите вашу профессию\"\n            }\n        },\n        licence: {\n            isRequired: {\n                message:\n                    \"Вы не можете использовать наш сервис без подтреврждения лицензионного соглашения\"\n            }\n        }\n    };\n    useEffect(() => {\n        validate();\n    }, [data]);\n    const validate = () => {\n        const errors = validator(data, validatorConfog);\n        setErrors(errors);\n        return Object.keys(errors).length === 0;\n    };\n    const isValid = Object.keys(errors).length === 0;\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        const isValid = validate();\n        if (!isValid) return;\n        const newData = {\n            ...data,\n            qualities: data.qualities.map((q) => q.value)\n        };\n        dispatch(signUp(newData));\n    };\n\n    return (\n        <form onSubmit={handleSubmit}>\n            <TextField\n                label=\"Электронная почта\"\n                name=\"email\"\n                value={data.email}\n                onChange={handleChange}\n                error={errors.email}\n            />\n            <TextField\n                label=\"Имя\"\n                name=\"name\"\n                value={data.name}\n                onChange={handleChange}\n                error={errors.name}\n            />\n            <TextField\n                label=\"Пароль\"\n                type=\"password\"\n                name=\"password\"\n                value={data.password}\n                onChange={handleChange}\n                error={errors.password}\n            />\n            <SelectField\n                label=\"Выбери свою профессию\"\n                defaultOption=\"Choose...\"\n                name=\"profession\"\n                options={professionsList}\n                onChange={handleChange}\n                value={data.profession}\n                error={errors.profession}\n            />\n            <RadioField\n                options={[\n                    { name: \"Male\", value: \"male\" },\n                    { name: \"Female\", value: \"female\" },\n                    { name: \"Other\", value: \"other\" }\n                ]}\n                value={data.sex}\n                name=\"sex\"\n                onChange={handleChange}\n                label=\"Выберите ваш пол\"\n            />\n            <MultiSelectField\n                options={qualitiesList}\n                onChange={handleChange}\n                name=\"qualities\"\n                label=\"Выберите ваши качесвта\"\n            />\n            <CheckBoxField\n                value={data.licence}\n                onChange={handleChange}\n                name=\"licence\"\n                error={errors.licence}\n            >\n                Подтвердить <a>лицензионное соглашение</a>\n            </CheckBoxField>\n            <button\n                type=\"submit\"\n                disabled={!isValid}\n                className=\"btn btn-primary w-100 mx-auto\"\n            >\n                Submit\n            </button>\n        </form>\n    );\n};\n\nexport default RegisterForm;\n"],"mappings":"giBAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,uBAAuB,CACjD,MAAOC,UAAS,KAAM,0BAA0B,CAChD,MAAOC,YAAW,KAAM,4BAA4B,CACpD,MAAOC,WAAU,KAAM,4BAA4B,CACnD,MAAOC,iBAAgB,KAAM,iCAAiC,CAC9D,MAAOC,cAAa,KAAM,8BAA8B,CACxD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,YAAY,KAAQ,uBAAuB,CACpD,OAASC,cAAc,KAAQ,yBAAyB,CACxD,OAASC,MAAM,KAAQ,mBAAmB,CAAC,wFAE3C,GAAMC,aAAY,CAAG,QAAfA,aAAY,EAAS,CACvB,GAAMC,SAAQ,CAAGL,WAAW,EAAE,CAAC,cACPR,QAAQ,CAAC,CAC7Bc,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,EAAE,CACdC,GAAG,CAAE,MAAM,CACXC,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,EAAE,CACbC,OAAO,CAAE,KACb,CAAC,CAAC,wCARKC,IAAI,eAAEC,OAAO,eAUpB,GAAMH,UAAS,CAAGZ,WAAW,CAACE,YAAY,EAAE,CAAC,CAC7C,GAAMc,cAAa,CAAGJ,SAAS,CAACK,GAAG,CAAC,SAACC,CAAC,QAAM,CACxCC,KAAK,CAAED,CAAC,CAACP,IAAI,CACbS,KAAK,CAAEF,CAAC,CAACG,GACb,CAAC,EAAC,CAAC,CACH,GAAMC,YAAW,CAAGtB,WAAW,CAACG,cAAc,EAAE,CAAC,CAEjD,GAAMoB,gBAAe,CAAGD,WAAW,CAACL,GAAG,CAAC,SAACO,CAAC,QAAM,CAC5CL,KAAK,CAAEK,CAAC,CAACb,IAAI,CACbS,KAAK,CAAEI,CAAC,CAACH,GACb,CAAC,EAAC,CAAC,CAAC,eACwB5B,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAAjCgC,MAAM,eAAEC,SAAS,eAExB,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,MAAM,CAAK,CAC7Bb,OAAO,CAAC,SAACc,SAAS,wCACXA,SAAS,wBACXD,MAAM,CAACjB,IAAI,CAAGiB,MAAM,CAACR,KAAK,IAC7B,CAAC,CACP,CAAC,CACD,GAAMU,gBAAe,CAAG,CACpBvB,KAAK,CAAE,CACHwB,UAAU,CAAE,CACRC,OAAO,CAAE,8CACb,CAAC,CACDC,OAAO,CAAE,CACLD,OAAO,CAAE,0BACb,CACJ,CAAC,CACDrB,IAAI,CAAE,CACFoB,UAAU,CAAE,CACRC,OAAO,CAAE,gCACb,CAAC,CACDE,GAAG,CAAE,CACDF,OAAO,CAAE,2CAA2C,CACpDZ,KAAK,CAAE,CACX,CACJ,CAAC,CACDZ,QAAQ,CAAE,CACNuB,UAAU,CAAE,CACRC,OAAO,CAAE,mCACb,CAAC,CACDG,eAAe,CAAE,CACbH,OAAO,CAAE,sDACb,CAAC,CACDI,cAAc,CAAE,CACZJ,OAAO,CAAE,4CACb,CAAC,CACDE,GAAG,CAAE,CACDF,OAAO,CAAE,6CAA6C,CACtDZ,KAAK,CAAE,CACX,CACJ,CAAC,CACDX,UAAU,CAAE,CACRsB,UAAU,CAAE,CACRC,OAAO,CAAE,qCACb,CACJ,CAAC,CACDnB,OAAO,CAAE,CACLkB,UAAU,CAAE,CACRC,OAAO,CACH,kFACR,CACJ,CACJ,CAAC,CACDxC,SAAS,CAAC,UAAM,CACZ6C,QAAQ,EAAE,CACd,CAAC,CAAE,CAACvB,IAAI,CAAC,CAAC,CACV,GAAMuB,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACnB,GAAMZ,OAAM,CAAG/B,SAAS,CAACoB,IAAI,CAAEgB,eAAe,CAAC,CAC/CJ,SAAS,CAACD,MAAM,CAAC,CACjB,MAAOa,OAAM,CAACC,IAAI,CAACd,MAAM,CAAC,CAACe,MAAM,GAAK,CAAC,CAC3C,CAAC,CACD,GAAMC,QAAO,CAAGH,MAAM,CAACC,IAAI,CAACd,MAAM,CAAC,CAACe,MAAM,GAAK,CAAC,CAEhD,GAAME,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CACxBA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAMH,QAAO,CAAGJ,QAAQ,EAAE,CAC1B,GAAI,CAACI,OAAO,CAAE,OACd,GAAMI,QAAO,gCACN/B,IAAI,MACPF,SAAS,CAAEE,IAAI,CAACF,SAAS,CAACK,GAAG,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACE,KAAK,GAAC,EAChD,CACDd,QAAQ,CAACF,MAAM,CAACyC,OAAO,CAAC,CAAC,CAC7B,CAAC,CAED,mBACI,cAAM,QAAQ,CAAEH,YAAa,wBACzB,KAAC,SAAS,EACN,KAAK,CAAC,mGAAmB,CACzB,IAAI,CAAC,OAAO,CACZ,KAAK,CAAE5B,IAAI,CAACP,KAAM,CAClB,QAAQ,CAAEoB,YAAa,CACvB,KAAK,CAAEF,MAAM,CAAClB,KAAM,EACtB,cACF,KAAC,SAAS,EACN,KAAK,CAAC,oBAAK,CACX,IAAI,CAAC,MAAM,CACX,KAAK,CAAEO,IAAI,CAACH,IAAK,CACjB,QAAQ,CAAEgB,YAAa,CACvB,KAAK,CAAEF,MAAM,CAACd,IAAK,EACrB,cACF,KAAC,SAAS,EACN,KAAK,CAAC,sCAAQ,CACd,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,CACf,KAAK,CAAEG,IAAI,CAACN,QAAS,CACrB,QAAQ,CAAEmB,YAAa,CACvB,KAAK,CAAEF,MAAM,CAACjB,QAAS,EACzB,cACF,KAAC,WAAW,EACR,KAAK,CAAC,sHAAuB,CAC7B,aAAa,CAAC,WAAW,CACzB,IAAI,CAAC,YAAY,CACjB,OAAO,CAAEe,eAAgB,CACzB,QAAQ,CAAEI,YAAa,CACvB,KAAK,CAAEb,IAAI,CAACL,UAAW,CACvB,KAAK,CAAEgB,MAAM,CAAChB,UAAW,EAC3B,cACF,KAAC,UAAU,EACP,OAAO,CAAE,CACL,CAAEE,IAAI,CAAE,MAAM,CAAES,KAAK,CAAE,MAAO,CAAC,CAC/B,CAAET,IAAI,CAAE,QAAQ,CAAES,KAAK,CAAE,QAAS,CAAC,CACnC,CAAET,IAAI,CAAE,OAAO,CAAES,KAAK,CAAE,OAAQ,CAAC,CACnC,CACF,KAAK,CAAEN,IAAI,CAACJ,GAAI,CAChB,IAAI,CAAC,KAAK,CACV,QAAQ,CAAEiB,YAAa,CACvB,KAAK,CAAC,wFAAkB,EAC1B,cACF,KAAC,gBAAgB,EACb,OAAO,CAAEX,aAAc,CACvB,QAAQ,CAAEW,YAAa,CACvB,IAAI,CAAC,WAAW,CAChB,KAAK,CAAC,4HAAwB,EAChC,cACF,MAAC,aAAa,EACV,KAAK,CAAEb,IAAI,CAACD,OAAQ,CACpB,QAAQ,CAAEc,YAAa,CACvB,IAAI,CAAC,SAAS,CACd,KAAK,CAAEF,MAAM,CAACZ,OAAQ,8FAEV,4JAA8B,GAC9B,cAChB,eACI,IAAI,CAAC,QAAQ,CACb,QAAQ,CAAE,CAAC4B,OAAQ,CACnB,SAAS,CAAC,+BAA+B,oBAGpC,GACN,CAEf,CAAC,CAED,cAAepC,aAAY"},"metadata":{},"sourceType":"module"}