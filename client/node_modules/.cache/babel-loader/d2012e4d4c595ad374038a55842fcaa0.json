{"ast":null,"code":"import { createAction, createSlice } from \"@reduxjs/toolkit\";\nimport commentService from \"../services/comment.service\";\nconst commentsSlice = createSlice({\n  name: \"comments\",\n  initialState: {\n    entities: null,\n    isLoading: true,\n    error: null\n  },\n  reducers: {\n    commentsRequested: state => {\n      state.isLoading = true;\n    },\n    commentsReceved: (state, action) => {\n      state.entities = action.payload;\n      state.isLoading = false;\n    },\n    commentsRequestFiled: (state, action) => {\n      state.error = action.payload;\n      state.isLoading = false;\n    },\n    commetnCreated: (state, action) => {\n      state.entities.push(action.payload);\n    },\n    commentRemoved: (state, action) => {\n      state.entities = state.entities.filter(c => c._id !== action.payload);\n    }\n  }\n});\nconst {\n  reducer: commentsReducer,\n  actions\n} = commentsSlice;\nconst {\n  commentsRequested,\n  commentsReceved,\n  commentsRequestFiled,\n  commetnCreated,\n  commentRemoved\n} = actions;\nconst addCommentRequested = createAction(\"comments/addCommentRequested\");\nconst removeCommentRequested = createAction(\"comments/removeCommentRequested\");\nexport const loadCommentsList = userId => async dispatch => {\n  dispatch(commentsRequested());\n  try {\n    const {\n      content\n    } = await commentService.getComments(userId);\n    dispatch(commentsReceved(content));\n  } catch (error) {\n    dispatch(commentsRequestFiled(error.message));\n  }\n};\nexport const createComment = payload => async dispatch => {\n  dispatch(addCommentRequested());\n  try {\n    const {\n      content\n    } = await commentService.createComment(payload);\n    dispatch(commetnCreated(content));\n  } catch (error) {\n    dispatch(commentsRequestFiled(error.message));\n  }\n};\nexport const removeComment = commentId => async dispatch => {\n  dispatch(removeCommentRequested());\n  try {\n    const {\n      content\n    } = await commentService.removeComment(commentId);\n    if (!content) {\n      dispatch(commentRemoved(commentId));\n    }\n  } catch (error) {\n    dispatch(commentsRequestFiled(error.message));\n  }\n};\nexport const getComments = () => state => state.comments.entities;\nexport const getCommentsLoadingStatus = () => state => state.comments.isLoading;\nexport default commentsReducer;","map":{"version":3,"names":["createAction","createSlice","commentService","commentsSlice","name","initialState","entities","isLoading","error","reducers","commentsRequested","state","commentsReceved","action","payload","commentsRequestFiled","commetnCreated","push","commentRemoved","filter","c","_id","reducer","commentsReducer","actions","addCommentRequested","removeCommentRequested","loadCommentsList","userId","dispatch","content","getComments","message","createComment","removeComment","commentId","comments","getCommentsLoadingStatus"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/store/comments.ts"],"sourcesContent":["import { IComment } from \"./../types/types\";\nimport { createAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport commentService from \"../services/comment.service\";\n\ninterface InitialState {\n    entities: any | null;\n    isLoading: boolean;\n    error: null;\n}\nconst commentsSlice = createSlice({\n    name: \"comments\",\n    initialState: {\n        entities: null,\n        isLoading: true,\n        error: null\n    } as InitialState,\n    reducers: {\n        commentsRequested: (state) => {\n            state.isLoading = true;\n        },\n        commentsReceved: (state, action: PayloadAction<IComment>) => {\n            state.entities = action.payload;\n            state.isLoading = false;\n        },\n        commentsRequestFiled: (state, action: PayloadAction<null>) => {\n            state.error = action.payload;\n            state.isLoading = false;\n        },\n        commetnCreated: (state, action: PayloadAction<IComment>) => {\n            state.entities.push(action.payload);\n        },\n        commentRemoved: (state, action: PayloadAction<IComment>) => {\n            state.entities = state.entities.filter(\n                (c) => c._id !== action.payload\n            );\n        }\n    }\n});\n\nconst { reducer: commentsReducer, actions } = commentsSlice;\nconst {\n    commentsRequested,\n    commentsReceved,\n    commentsRequestFiled,\n    commetnCreated,\n    commentRemoved\n} = actions;\n\nconst addCommentRequested = createAction(\"comments/addCommentRequested\");\nconst removeCommentRequested = createAction(\"comments/removeCommentRequested\");\n\nexport const loadCommentsList = (userId: string) => async (dispatch) => {\n    dispatch(commentsRequested());\n    try {\n        const { content } = await commentService.getComments(userId);\n        dispatch(commentsReceved(content));\n    } catch (error) {\n        dispatch(commentsRequestFiled(error.message));\n    }\n};\nexport const createComment = (payload) => async (dispatch) => {\n    dispatch(addCommentRequested());\n    try {\n        const { content } = await commentService.createComment(payload);\n        dispatch(commetnCreated(content));\n    } catch (error) {\n        dispatch(commentsRequestFiled(error.message));\n    }\n};\nexport const removeComment = (commentId) => async (dispatch) => {\n    dispatch(removeCommentRequested());\n    try {\n        const { content } = await commentService.removeComment(commentId);\n        if (!content) {\n            dispatch(commentRemoved(commentId));\n        }\n    } catch (error) {\n        dispatch(commentsRequestFiled(error.message));\n    }\n};\n\nexport const getComments = () => (state) => state.comments.entities;\nexport const getCommentsLoadingStatus = () => (state) =>\n    state.comments.isLoading;\n\nexport default commentsReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}