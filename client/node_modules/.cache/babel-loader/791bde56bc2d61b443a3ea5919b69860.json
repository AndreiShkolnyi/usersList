{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAction,createSlice}from\"@reduxjs/toolkit\";import commentService from\"../services/comment.service\";var commentsSlice=createSlice({name:\"comments\",initialState:{entities:null,isLoading:true,error:null},reducers:{commentsRequested:function commentsRequested(state){state.isLoading=true;},commentsReceved:function commentsReceved(state,action){state.entities=action.payload;state.isLoading=false;},commentsRequestFiled:function commentsRequestFiled(state,action){state.error=action.payload;state.isLoading=false;},commetnCreated:function commetnCreated(state,action){state.entities.push(action.payload);},commentRemoved:function commentRemoved(state,action){state.entities=state.entities.filter(function(c){return c._id!==action.payload;});}}});var commentsReducer=commentsSlice.reducer,actions=commentsSlice.actions;var commentsRequested=actions.commentsRequested,commentsReceved=actions.commentsReceved,commentsRequestFiled=actions.commentsRequestFiled,commetnCreated=actions.commetnCreated,commentRemoved=actions.commentRemoved;var addCommentRequested=createAction(\"comments/addCommentRequested\");var removeCommentRequested=createAction(\"comments/removeCommentRequested\");export var loadCommentsList=function loadCommentsList(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$commentService,content;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(commentsRequested());_context.prev=1;_context.next=4;return commentService.getComments(userId);case 4:_yield$commentService=_context.sent;content=_yield$commentService.content;dispatch(commentsReceved(content));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);dispatch(commentsRequestFiled(_context.t0.message));case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var createComment=function createComment(payload){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _yield$commentService2,content;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(addCommentRequested());_context2.prev=1;_context2.next=4;return commentService.createComment(payload);case 4:_yield$commentService2=_context2.sent;content=_yield$commentService2.content;dispatch(commetnCreated(content));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);dispatch(commentsRequestFiled(_context2.t0.message));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();};export var removeComment=function removeComment(commentId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$commentService3,content;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(removeCommentRequested());_context3.prev=1;_context3.next=4;return commentService.removeComment(commentId);case 4:_yield$commentService3=_context3.sent;content=_yield$commentService3.content;if(!content){dispatch(commentRemoved(commentId));}_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch(commentsRequestFiled(_context3.t0.message));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x4){return _ref3.apply(this,arguments);};}();};export var getComments=function getComments(){return function(state){return state.comments.entities;};};export var getCommentsLoadingStatus=function getCommentsLoadingStatus(){return function(state){return state.comments.isLoading;};};export default commentsReducer;","map":{"version":3,"names":["createAction","createSlice","commentService","commentsSlice","name","initialState","entities","isLoading","error","reducers","commentsRequested","state","commentsReceved","action","payload","commentsRequestFiled","commetnCreated","push","commentRemoved","filter","c","_id","commentsReducer","reducer","actions","addCommentRequested","removeCommentRequested","loadCommentsList","userId","dispatch","getComments","content","message","createComment","getState","removeComment","commentId","comments","getCommentsLoadingStatus"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/store/comments.js"],"sourcesContent":["import { createAction, createSlice } from \"@reduxjs/toolkit\";\nimport commentService from \"../services/comment.service\";\nconst commentsSlice = createSlice({\n    name: \"comments\",\n    initialState: {\n        entities: null,\n        isLoading: true,\n        error: null\n    },\n    reducers: {\n        commentsRequested: (state) => {\n            state.isLoading = true;\n        },\n        commentsReceved: (state, action) => {\n            state.entities = action.payload;\n            state.isLoading = false;\n        },\n        commentsRequestFiled: (state, action) => {\n            state.error = action.payload;\n            state.isLoading = false;\n        },\n        commetnCreated: (state, action) => {\n            state.entities.push(action.payload);\n        },\n        commentRemoved: (state, action) => {\n            state.entities = state.entities.filter(\n                (c) => c._id !== action.payload\n            );\n        }\n    }\n});\n\nconst { reducer: commentsReducer, actions } = commentsSlice;\nconst {\n    commentsRequested,\n    commentsReceved,\n    commentsRequestFiled,\n    commetnCreated,\n    commentRemoved\n} = actions;\n\nconst addCommentRequested = createAction(\"comments/addCommentRequested\");\nconst removeCommentRequested = createAction(\"comments/removeCommentRequested\");\n\nexport const loadCommentsList = (userId) => async (dispatch) => {\n    dispatch(commentsRequested());\n    try {\n        const { content } = await commentService.getComments(userId);\n        dispatch(commentsReceved(content));\n    } catch (error) {\n        dispatch(commentsRequestFiled(error.message));\n    }\n};\nexport const createComment = (payload) => async (dispatch, getState) => {\n    dispatch(addCommentRequested());\n    try {\n        const { content } = await commentService.createComment(payload);\n        dispatch(commetnCreated(content));\n    } catch (error) {\n        dispatch(commentsRequestFiled(error.message));\n    }\n};\nexport const removeComment = (commentId) => async (dispatch) => {\n    dispatch(removeCommentRequested());\n    try {\n        const { content } = await commentService.removeComment(commentId);\n        if (!content) {\n            dispatch(commentRemoved(commentId));\n        }\n    } catch (error) {\n        dispatch(commentsRequestFiled(error.message));\n    }\n};\n\nexport const getComments = () => (state) => state.comments.entities;\nexport const getCommentsLoadingStatus = () => (state) =>\n    state.comments.isLoading;\n\nexport default commentsReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}