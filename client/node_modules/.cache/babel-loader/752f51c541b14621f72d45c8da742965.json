{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from\"@reduxjs/toolkit\";import qualityService from\"../services/qaulity.service\";import isOutdated from\"../utils/isOutdated\";var qualitiesSlice=createSlice({name:\"qualities\",initialState:{entities:null,isLoading:true,error:null,lastFetch:null},reducers:{qualitiesRequested:function qualitiesRequested(state){state.isLoading=true;},qualitiesReceved:function qualitiesReceved(state,action){state.entities=action.payload;state.lastFetch=Date.now();state.isLoading=false;},qualitiesRequestFiled:function qualitiesRequestFiled(state,action){state.error=action.payload;state.isLoading=false;}}});var qualitiesReducer=qualitiesSlice.reducer,actions=qualitiesSlice.actions;var qualitiesRequested=actions.qualitiesRequested,qualitiesReceved=actions.qualitiesReceved,qualitiesRequestFiled=actions.qualitiesRequestFiled;export var loadQualitiesList=function loadQualitiesList(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var lastFetch,_yield$qualityService,content;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:lastFetch=getState().qualities.lastFetch;if(!isOutdated(lastFetch)){_context.next=14;break;}dispatch(qualitiesRequested());_context.prev=3;_context.next=6;return qualityService.fetchAll();case 6:_yield$qualityService=_context.sent;content=_yield$qualityService.content;dispatch(qualitiesReceved(content));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);dispatch(qualitiesRequestFiled(_context.t0.message));case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var getQualities=function getQualities(){return function(state){return state.qualities.entities;};};export var getQualitiesLoadingStatus=function getQualitiesLoadingStatus(){return function(state){return state.qualities.isLoading;};};export var getQulitiesByIds=function getQulitiesByIds(qualitiesIds){return function(state){if(state.qualities.entities){var qualitiesArray=[];var _iterator=_createForOfIteratorHelper(qualitiesIds),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var qualId=_step.value;var _iterator2=_createForOfIteratorHelper(state.qualities.entities),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var quality=_step2.value;if(quality._id===qualId){qualitiesArray.push(quality);break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return qualitiesArray;}return[];};};export default qualitiesReducer;","map":{"version":3,"names":["createSlice","qualityService","isOutdated","qualitiesSlice","name","initialState","entities","isLoading","error","lastFetch","reducers","qualitiesRequested","state","qualitiesReceved","action","payload","Date","now","qualitiesRequestFiled","qualitiesReducer","reducer","actions","loadQualitiesList","dispatch","getState","qualities","fetchAll","content","message","getQualities","getQualitiesLoadingStatus","getQulitiesByIds","qualitiesIds","qualitiesArray","qualId","quality","_id","push"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/store/qualities.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport qualityService from \"../services/qaulity.service\";\nimport isOutdated from \"../utils/isOutdated\";\n\nconst qualitiesSlice = createSlice({\n    name: \"qualities\",\n    initialState: {\n        entities: null,\n        isLoading: true,\n        error: null,\n        lastFetch: null\n    },\n    reducers: {\n        qualitiesRequested: (state) => {\n            state.isLoading = true;\n        },\n        qualitiesReceved: (state, action) => {\n            state.entities = action.payload;\n            state.lastFetch = Date.now();\n            state.isLoading = false;\n        },\n        qualitiesRequestFiled: (state, action) => {\n            state.error = action.payload;\n            state.isLoading = false;\n        }\n    }\n});\n\nconst { reducer: qualitiesReducer, actions } = qualitiesSlice;\nconst { qualitiesRequested, qualitiesReceved, qualitiesRequestFiled } = actions;\n\nexport const loadQualitiesList = () => async (dispatch, getState) => {\n    const { lastFetch } = getState().qualities;\n    if (isOutdated(lastFetch)) {\n        dispatch(qualitiesRequested());\n        try {\n            const { content } = await qualityService.fetchAll();\n            dispatch(qualitiesReceved(content));\n        } catch (error) {\n            dispatch(qualitiesRequestFiled(error.message));\n        }\n    }\n};\n\nexport const getQualities = () => (state) => state.qualities.entities;\nexport const getQualitiesLoadingStatus = () => (state) =>\n    state.qualities.isLoading;\nexport const getQulitiesByIds = (qualitiesIds) => (state) => {\n    if (state.qualities.entities) {\n        const qualitiesArray = [];\n        for (const qualId of qualitiesIds) {\n            for (const quality of state.qualities.entities) {\n                if (quality._id === qualId) {\n                    qualitiesArray.push(quality);\n                    break;\n                }\n            }\n        }\n        return qualitiesArray;\n    }\n    return [];\n};\n\nexport default qualitiesReducer;\n"],"mappings":"ojBAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,eAAc,KAAM,6BAA6B,CACxD,MAAOC,WAAU,KAAM,qBAAqB,CAE5C,GAAMC,eAAc,CAAGH,WAAW,CAAC,CAC/BI,IAAI,CAAE,WAAW,CACjBC,YAAY,CAAE,CACVC,QAAQ,CAAE,IAAI,CACdC,SAAS,CAAE,IAAI,CACfC,KAAK,CAAE,IAAI,CACXC,SAAS,CAAE,IACf,CAAC,CACDC,QAAQ,CAAE,CACNC,kBAAkB,CAAE,4BAACC,KAAK,CAAK,CAC3BA,KAAK,CAACL,SAAS,CAAG,IAAI,CAC1B,CAAC,CACDM,gBAAgB,CAAE,0BAACD,KAAK,CAAEE,MAAM,CAAK,CACjCF,KAAK,CAACN,QAAQ,CAAGQ,MAAM,CAACC,OAAO,CAC/BH,KAAK,CAACH,SAAS,CAAGO,IAAI,CAACC,GAAG,EAAE,CAC5BL,KAAK,CAACL,SAAS,CAAG,KAAK,CAC3B,CAAC,CACDW,qBAAqB,CAAE,+BAACN,KAAK,CAAEE,MAAM,CAAK,CACtCF,KAAK,CAACJ,KAAK,CAAGM,MAAM,CAACC,OAAO,CAC5BH,KAAK,CAACL,SAAS,CAAG,KAAK,CAC3B,CACJ,CACJ,CAAC,CAAC,CAAC,GAEcY,iBAAgB,CAAchB,cAAc,CAArDiB,OAAO,CAAoBC,OAAO,CAAKlB,cAAc,CAA1BkB,OAAO,IAClCV,mBAAkB,CAA8CU,OAAO,CAAvEV,kBAAkB,CAAEE,gBAAgB,CAA4BQ,OAAO,CAAnDR,gBAAgB,CAAEK,qBAAqB,CAAKG,OAAO,CAAjCH,qBAAqB,CAEnE,MAAO,IAAMI,kBAAiB,CAAG,QAApBA,kBAAiB,kGAAS,iBAAOC,QAAQ,CAAEC,QAAQ,8JACpDf,SAAS,CAAKe,QAAQ,EAAE,CAACC,SAAS,CAAlChB,SAAS,KACbP,UAAU,CAACO,SAAS,CAAC,0BACrBc,QAAQ,CAACZ,kBAAkB,EAAE,CAAC,CAAC,sCAEDV,eAAc,CAACyB,QAAQ,EAAE,4CAA3CC,OAAO,uBAAPA,OAAO,CACfJ,QAAQ,CAACV,gBAAgB,CAACc,OAAO,CAAC,CAAC,CAAC,iFAEpCJ,QAAQ,CAACL,qBAAqB,CAAC,YAAMU,OAAO,CAAC,CAAC,CAAC,qEAG1D,qEAED,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAY,SAAS,UAACjB,KAAK,QAAKA,MAAK,CAACa,SAAS,CAACnB,QAAQ,KACrE,MAAO,IAAMwB,0BAAyB,CAAG,QAA5BA,0BAAyB,SAAS,UAAClB,KAAK,QACjDA,MAAK,CAACa,SAAS,CAAClB,SAAS,KAC7B,MAAO,IAAMwB,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIC,YAAY,QAAK,UAACpB,KAAK,CAAK,CACzD,GAAIA,KAAK,CAACa,SAAS,CAACnB,QAAQ,CAAE,CAC1B,GAAM2B,eAAc,CAAG,EAAE,CAAC,yCACLD,YAAY,YAAjC,+CAAmC,IAAxBE,OAAM,uDACStB,KAAK,CAACa,SAAS,CAACnB,QAAQ,aAA9C,kDAAgD,IAArC6B,QAAO,cACd,GAAIA,OAAO,CAACC,GAAG,GAAKF,MAAM,CAAE,CACxBD,cAAc,CAACI,IAAI,CAACF,OAAO,CAAC,CAC5B,MACJ,CACJ,CAAC,uDACL,CAAC,qDACD,MAAOF,eAAc,CACzB,CACA,MAAO,EAAE,CACb,CAAC,GAED,cAAed,iBAAgB"},"metadata":{},"sourceType":"module"}