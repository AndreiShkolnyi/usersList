{"ast":null,"code":"var _jsxFileName = \"/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/components/page/usersListPage/usersListPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { paginate } from \"../../../utils/paginate\";\nimport Pagination from \"../../common/pagination\";\nimport GroupList from \"../../common/groupList\";\nimport SearchStatus from \"../../ui/searchStatus\";\nimport UserTable from \"../../ui/usersTable\";\nimport _ from \"lodash\";\nimport { getProfessions, getProfessionsLoadingStatus } from \"../../../store/professions\";\nimport { useSelector } from \"react-redux\";\nimport { getCurrentUserId, getUsersList } from \"../../../store/users\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UsersListPage = () => {\n  _s();\n  const users = useSelector(getUsersList());\n  const currentUserId = useSelector(getCurrentUserId());\n  const professions = useSelector(getProfessions());\n  const professionsLoading = useSelector(getProfessionsLoadingStatus());\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedProf, setSelectedProf] = useState({});\n  const [sortBy, setSortBy] = useState({\n    path: \"name\",\n    order: \"asc\"\n  });\n  const pageSize = 8;\n\n  // const handleDelete = (userId: string) => {};\n  // const handleToggleBookMark = (id: string) => {\n  //     const newArray = users.map((user: any) => {\n  //         if (user._id === id) {\n  //             return { ...user, bookmark: !user.bookmark };\n  //         }\n  //         return user;\n  //     });\n  //     // setUsers(newArray);\n  //     console.log(newArray);\n  // };\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedProf, searchQuery]);\n  const handleProfessionSelect = item => {\n    if (searchQuery !== \"\") setSearchQuery(\"\");\n    setSelectedProf(item);\n  };\n  const handleSearchQuery = _ref => {\n    let {\n      target\n    } = _ref;\n    setSelectedProf(undefined);\n    setSearchQuery(target.value);\n  };\n  const handlePageChange = pageIndex => {\n    setCurrentPage(pageIndex);\n  };\n  const handleSort = item => {\n    setSortBy(item);\n  };\n  function filterUsers(data) {\n    const filteredUsers = searchQuery ? data.filter(user => user.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1) : selectedProf ? data.filter(user => user.profession === selectedProf._id) : data;\n    return filteredUsers.filter(u => u._id !== currentUserId);\n  }\n  const filteredUsers = filterUsers(users);\n  const count = filteredUsers.length;\n  const sortedUsers = _.orderBy(filteredUsers, [sortBy.path], [sortBy.order]);\n  const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n  const clearFilter = () => {\n    setSelectedProf(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex\",\n    children: [professions && !professionsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column flex-shrink-0 p-3\",\n      children: [/*#__PURE__*/_jsxDEV(GroupList, {\n        selectedItem: selectedProf,\n        items: professions,\n        onItemSelect: handleProfessionSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary mt-2\",\n        onClick: clearFilter,\n        children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(SearchStatus, {\n        length: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"searchQuery\",\n        placeholder: \"Search...\",\n        onChange: handleSearchQuery,\n        value: searchQuery\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), count > 0 && /*#__PURE__*/_jsxDEV(UserTable, {\n        users: usersCrop,\n        onSort: handleSort,\n        selectedSort: sortBy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          itemsCount: count,\n          pageSize: pageSize,\n          currentPage: currentPage,\n          onPageChange: handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n};\n_s(UsersListPage, \"KEstrEBXhxpi4BUZnPveL3qfJl0=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector];\n});\n_c = UsersListPage;\nexport default UsersListPage;\nvar _c;\n$RefreshReg$(_c, \"UsersListPage\");","map":{"version":3,"names":["React","useState","useEffect","paginate","Pagination","GroupList","SearchStatus","UserTable","_","getProfessions","getProfessionsLoadingStatus","useSelector","getCurrentUserId","getUsersList","UsersListPage","users","currentUserId","professions","professionsLoading","currentPage","setCurrentPage","searchQuery","setSearchQuery","selectedProf","setSelectedProf","sortBy","setSortBy","path","order","pageSize","handleProfessionSelect","item","handleSearchQuery","target","undefined","value","handlePageChange","pageIndex","handleSort","filterUsers","data","filteredUsers","filter","user","name","toLowerCase","indexOf","profession","_id","u","count","length","sortedUsers","orderBy","usersCrop","clearFilter"],"sources":["/Users/sikollineu-iandeulei/Desktop/Userslist/usersList/client/src/app/components/page/usersListPage/usersListPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { paginate } from \"../../../utils/paginate\";\nimport Pagination from \"../../common/pagination\";\nimport GroupList from \"../../common/groupList\";\nimport SearchStatus from \"../../ui/searchStatus\";\nimport UserTable from \"../../ui/usersTable\";\nimport _ from \"lodash\";\nimport {\n    getProfessions,\n    getProfessionsLoadingStatus\n} from \"../../../store/professions\";\nimport { useSelector } from \"react-redux\";\nimport { getCurrentUserId, getUsersList } from \"../../../store/users\";\nimport { IUser } from \"../../../types/types\";\nconst UsersListPage = () => {\n    const users = useSelector(getUsersList());\n    const currentUserId = useSelector(getCurrentUserId());\n\n    const professions = useSelector(getProfessions());\n    const professionsLoading = useSelector(getProfessionsLoadingStatus());\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [selectedProf, setSelectedProf] = useState<any>({});\n    const [sortBy, setSortBy] = useState<any>({ path: \"name\", order: \"asc\" });\n    const pageSize = 8;\n\n    // const handleDelete = (userId: string) => {};\n    // const handleToggleBookMark = (id: string) => {\n    //     const newArray = users.map((user: any) => {\n    //         if (user._id === id) {\n    //             return { ...user, bookmark: !user.bookmark };\n    //         }\n    //         return user;\n    //     });\n    //     // setUsers(newArray);\n    //     console.log(newArray);\n    // };\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [selectedProf, searchQuery]);\n\n    const handleProfessionSelect = (item: any) => {\n        if (searchQuery !== \"\") setSearchQuery(\"\");\n        setSelectedProf(item);\n    };\n    const handleSearchQuery = ({ target }: any) => {\n        setSelectedProf(undefined);\n        setSearchQuery(target.value);\n    };\n\n    const handlePageChange = (pageIndex: number) => {\n        setCurrentPage(pageIndex);\n    };\n    const handleSort = (item: any) => {\n        setSortBy(item);\n    };\n\n    function filterUsers(data: any) {\n        const filteredUsers = searchQuery\n            ? data.filter(\n                  (user: IUser) =>\n                      user.name\n                          .toLowerCase()\n                          .indexOf(searchQuery.toLowerCase()) !== -1\n              )\n            : selectedProf\n            ? data.filter((user: IUser) => user.profession === selectedProf._id)\n            : data;\n        return filteredUsers.filter((u: IUser) => u._id !== currentUserId);\n    }\n    const filteredUsers = filterUsers(users);\n    const count = filteredUsers.length;\n    const sortedUsers = _.orderBy(filteredUsers, [sortBy.path], [sortBy.order]);\n    const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n    const clearFilter = () => {\n        setSelectedProf(null);\n    };\n\n    return (\n        <div className=\"d-flex\">\n            {professions && !professionsLoading && (\n                <div className=\"d-flex flex-column flex-shrink-0 p-3\">\n                    <GroupList\n                        selectedItem={selectedProf}\n                        items={professions}\n                        onItemSelect={handleProfessionSelect}\n                    />\n                    <button\n                        className=\"btn btn-secondary mt-2\"\n                        onClick={clearFilter}\n                    >\n                        Очиститть\n                    </button>\n                </div>\n            )}\n            <div className=\"d-flex flex-column\">\n                <SearchStatus length={count} />\n                <input\n                    type=\"text\"\n                    name=\"searchQuery\"\n                    placeholder=\"Search...\"\n                    onChange={handleSearchQuery}\n                    value={searchQuery}\n                />\n                {count > 0 && (\n                    <UserTable\n                        users={usersCrop}\n                        onSort={handleSort}\n                        selectedSort={sortBy}\n                    />\n                )}\n                <div className=\"d-flex justify-content-center\">\n                    <Pagination\n                        itemsCount={count}\n                        pageSize={pageSize}\n                        currentPage={currentPage}\n                        onPageChange={handlePageChange}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default UsersListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}